<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GOasis - Tribute Band Oasis</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Montserrat:wght@300;400;500;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
</head>
<body>
    <header>
        <nav>
            <div class="logo">
                <img src="img/logo GOasis.jpeg" alt="GOasis Logo">
            </div>
            <ul class="nav-links">
                <li><a href="#home">Home</a></li>
                <li><a href="#band">La Band</a></li>
                <li><a href="#concerti">Concerti</a></li>
                <li><a href="#mappa">Mappa</a></li>
                <li><a href="#contatti">Contatti</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section id="home" class="hero">
            <div class="hero-overlay"></div>
            <div class="hero-content">
                <h1 class="hero-title">GOasis</h1>
                <p class="hero-subtitle">Il tributo che anche Noel approverebbe (...forse)</p>
                <div class="hero-buttons">
                    <a href="#concerti" class="btn btn-primary">Prossimi Concerti</a>
                    <a href="#contatti" class="btn btn-secondary">Contattaci</a>
                </div>
            </div>
        </section>

        <section id="concerti" class="concerts-section">
            <div class="container">
                <h2>I prossimi concerti</h2>
                <div class="concert-list" id="concert-list">
                    <!-- I concerti verranno caricati dinamicamente -->
                    <div class="loading">Caricamento concerti...</div>
                </div>
            </div>
        </section>

        <section id="band" class="band-section">
            <div class="container">
                <h2>La Band</h2>
                
                <div class="band-photos">
                    <div class="band-member-photo">
                        <div class="photo-circle">
                            <img src="img/Alberto.JPG" alt="Alberto Cabas Vidani">
                        </div>
                        <h4>Alberto Cabas Vidani</h4>
                        <p>Voce e Chitarra</p>
                    </div>
                    <div class="band-member-photo">
                        <div class="photo-circle">
                            <img src="img/Omar.JPG" alt="Omar Greco">
                        </div>
                        <h4>Omar Greco</h4>
                        <p>Chitarra e Voce</p>
                    </div>
                    <div class="band-member-photo">
                        <div class="photo-circle">
                            <img src="img/giulio.png" alt="Giulio Re">
                        </div>
                        <h4>Giulio Re</h4>
                        <p>Batteria</p>
                    </div>
                    <div class="band-member-photo">
                        <div class="photo-circle">
                            <img src="img/mario.jpeg" alt="Mario Debat">
                        </div>
                        <h4>Mario Debat</h4>
                        <p>Basso</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="mappa" class="map-section">
            <div class="container">
                <h2>Dove Abbiamo Suonato</h2>
                <div id="concert-map" class="concert-map"></div>
                <div id="map-loading" class="map-loading">Caricamento mappa...</div>
            </div>
        </section>

        <section id="contatti" class="contact-section">
            <div class="container">
                <h2>Contatti</h2>
                <div class="contact-icons">
                    <a href="mailto:info@goasis.it" class="contact-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <polyline points="22,6 12,13 2,6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </a>
                    
                    <a href="https://www.facebook.com/goasisgoasis" target="_blank" class="contact-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M22 12c0-5.52-4.48-10-10-10S2 6.48 2 12c0 4.84 3.44 8.87 8 9.8V15H8v-3h2V9.5C10 7.57 11.57 6 13.5 6H16v3h-2c-.55 0-1 .45-1 1v2h3v3h-3v6.95c5.05-.5 9-4.76 9-9.95z" fill="currentColor"/>
                        </svg>
                    </a>
                    
                    <a href="https://www.instagram.com/goasistribute/" target="_blank" class="contact-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <rect x="2" y="2" width="20" height="20" rx="5" ry="5" stroke="currentColor" stroke-width="2"/>
                            <path d="m16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z" stroke="currentColor" stroke-width="2"/>
                            <line x1="17.5" y1="6.5" x2="17.51" y2="6.5" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    </a>
                    
                    <a href="https://wa.me/393491611737" target="_blank" class="contact-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.893 3.488" fill="currentColor"/>
                        </svg>
                    </a>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2024 GOasis Tribute Band. Tutti i diritti riservati.</p>
            <p>Tribute to Oasis - Non affiliati ufficialmente con la band originale</p>
        </div>
    </footer>
    
    <script>
        // Carica i concerti dal file JSON
        async function loadConcerts() {
            const concertList = document.getElementById('concert-list');
            
            try {
                const response = await fetch(`data/concerts.json?v=${Date.now()}`);
                
                if (!response.ok) {
                    throw new Error('File concerti non trovato');
                }
                
                const concerts = await response.json();
                
                // Debug logging
                console.log('Loaded concerts:', concerts);
                concerts.forEach((concert, index) => {
                    console.log(`Concert ${index}:`, concert.venue, 'acoustic:', concert.acoustic);
                });
                
                if (concerts.length === 0) {
                    concertList.innerHTML = '<p style="text-align: center; color: #666;">Nessun concerto programmato al momento</p>';
                    return;
                }
                
                // Genera HTML per ogni concerto
                const concertsHTML = concerts.map(concert => {
                    const acousticText = concert.acoustic ? ' (acustico)' : '';
                    console.log(`Generating HTML for ${concert.venue}: acoustic=${concert.acoustic}, acousticText="${acousticText}"`);
                    
                    return `
                    <div class="concert-item">
                        <div class="date-info">
                            <span class="date">${concert.day}/${concert.month}/${concert.year || '2025'}</span>
                        </div>
                        <div class="details">
                            <h3>${concert.venue}${acousticText}</h3>
                            ${concert.location ? `<p class="location">${concert.location}</p>` : ''}
                            ${concert.city ? `<p class="city">${concert.city}</p>` : ''}
                            ${concert.notes ? `<p class="notes">${concert.notes}</p>` : ''}
                        </div>
                    </div>
                `;
                }).join('');
                
                concertList.innerHTML = concertsHTML;
                
            } catch (error) {
                console.error('Errore caricamento concerti:', error);
                // Mostra concerti di esempio se il file non esiste ancora
                concertList.innerHTML = `
                    <div class="concert-item">
                        <div class="date">
                            <span class="day">TBD</span>
                            <span class="month">---</span>
                        </div>
                        <div class="details">
                            <h3>Prossimamente</h3>
                            <p>Nuove date in arrivo!</p>
                            <p>Seguici sui social per aggiornamenti</p>
                        </div>
                    </div>
                `;
            }
        }
        
        // Carica e inizializza la mappa dei concerti passati
        async function loadConcertMap() {
            const mapContainer = document.getElementById('concert-map');
            const mapLoading = document.getElementById('map-loading');
            
            try {
                const response = await fetch(`data/past-concerts-map.json?cache=bust&v=${Date.now()}`, {
                    cache: 'no-store',
                    headers: {
                        'Cache-Control': 'no-cache, no-store, must-revalidate',
                        'Pragma': 'no-cache'
                    }
                });
                
                if (!response.ok) {
                    throw new Error('Dati mappa non trovati');
                }
                
                const concerts = await response.json();
                
                // Nascondi loading
                mapLoading.style.display = 'none';
                mapContainer.style.display = 'block';
                
                // Inizializza mappa centrata sull'Italia del Nord
                const map = L.map('concert-map').setView([45.8, 13.0], 8);
                
                // Aggiungi tile layer OpenStreetMap
                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    attribution: '© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
                }).addTo(map);
                
                // Aggiungi markers per ogni concerto
                concerts.forEach(concert => {
                    if (concert.coordinates) {
                        const marker = L.marker([concert.coordinates.lat, concert.coordinates.lng])
                            .addTo(map)
                            .bindPopup(concert.popupText);
                    }
                });
                
                // Auto-fit della mappa se ci sono concerti
                if (concerts.length > 0) {
                    const group = new L.featureGroup(
                        concerts
                            .filter(c => c.coordinates)
                            .map(c => L.marker([c.coordinates.lat, c.coordinates.lng]))
                    );
                    map.fitBounds(group.getBounds().pad(0.1));
                }
                
                
                console.log(`Loaded map with ${concerts.length} past concerts`);
                
            } catch (error) {
                console.error('Errore caricamento mappa:', error);
                mapLoading.innerHTML = 'Mappa in aggiornamento... Torna presto per vedere tutti i luoghi dove abbiamo suonato!';
                
                // Nascondi il contenitore mappa se c'è un errore
                mapContainer.style.display = 'none';
            }
        }
        
        // Carica concerti e mappa quando la pagina è pronta
        document.addEventListener('DOMContentLoaded', () => {
            loadConcerts();
            loadConcertMap();
        });
    </script>
</body>
</html>